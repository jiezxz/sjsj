(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa9246dc","chunk-3187c104","chunk-2d0d0454"],{"0d63":function(e,t,i){"use strict";i.r(t);var n=i("7a23"),o=function(e){return Object(n["pushScopeId"])("data-v-0463adc6"),e=e(),Object(n["popScopeId"])(),e},l={class:"vol-dialog"},r=o((function(){return Object(n["createElementVNode"])("i",{class:"el-icon el-icon-full-screen"},null,-1)})),a=[r],d={key:0,class:"dia-footer"},c=o((function(){return Object(n["createElementVNode"])("i",{class:"el-icon-close"},null,-1)})),s=Object(n["createTextVNode"])("关闭");function u(e,t,i,o,r,u){var f=Object(n["resolveComponent"])("el-scrollbar"),p=Object(n["resolveComponent"])("el-button"),m=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,[Object(n["createVNode"])(m,{modelValue:e.vmodel,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.vmodel=t}),"close-on-click-modal":!1,"close-on-press-escape":!1,width:e.width,fullscreen:e.fullscreen,draggable:e.draggable,modal:e.modal,"before-close":e.handleClose},{header:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])(e.icon)},null,2),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.title)+" ",1),Object(n["createElementVNode"])("button",{class:"el-dialog__headerbtn",type:"button",style:{right:"35px",color:"var(--el-color-info)"},onClick:t[0]||(t[0]=function(){return e.handleFullScreen&&e.handleFullScreen.apply(e,arguments)})},a)]})),footer:Object(n["withCtx"])((function(){return[e.footer?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",d,[Object(n["renderSlot"])(e.$slots,"footer",{},void 0,!0),e.footer?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0,type:"primary",size:"mini",onClick:t[1]||(t[1]=function(t){return e.handleClose()})},{default:Object(n["withCtx"])((function(){return[c,s]})),_:1}))])):Object(n["createCommentVNode"])("",!0)]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{"max-height":e.contentHeight},{default:Object(n["withCtx"])((function(){return[e.inited?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,style:Object(n["normalizeStyle"])([{"min-height":"50px"},{padding:e.padding+"px"}]),class:"srcoll-content"},[Object(n["renderSlot"])(e.$slots,"content",{},void 0,!0),Object(n["renderSlot"])(e.$slots,"default",{},void 0,!0)],4)):Object(n["createCommentVNode"])("",!0)]})),_:3},8,["max-height"])]})),_:3},8,["modelValue","width","fullscreen","draggable","modal","before-close"])])}i("a9e3");var f=Object(n["defineComponent"])({props:{modelValue:!1,lazy:{type:Boolean,default:!1},icon:{type:String,default:"el-icon-warning-outline"},title:{type:String,default:"基本信息"},height:{type:Number,default:200},width:{type:Number,default:650},padding:{type:Number,default:16},modal:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},onModelClose:{type:Function,default:function(e){return!0}},footer:{type:Boolean,default:!0}},setup:function(e,t){var i=.95*document.body.clientHeight-60,o=Object(n["ref"])(!0),l=Object(n["ref"])(!1),r=Object(n["ref"])(!1),a=Object(n["ref"])(100);l.value=e.modelValue,r.value=!!t.slots.footer;var d=Object(n["ref"])(200);d.value=e.height;var c=function(i,n){var o=e.onModelClose(!!n);!1!==o&&(l.value=!1,t.emit("update:modelValue",!1),i&&i())},s=function(e){return d.value=i-30,i/-2+"px"};a.value=s(),Object(n["watch"])((function(){return e.modelValue}),(function(e,t){l.value=e})),Object(n["watch"])((function(){return e.height}),(function(e,t){a.value=s()}));var u=Object(n["ref"])(!1),f=function(){u.value=!u.value,t.emit("fullscreen",u.value)};return{handleClose:c,inited:o,vmodel:l,footer:r,top:a,calcHeight:s,contentHeight:d,fullscreen:u,handleFullScreen:f}}}),p=(i("19bb"),i("a80f"),i("6b0d")),m=i.n(p);const h=m()(f,[["render",u],["__scopeId","data-v-0463adc6"]]);t["default"]=h},"19bb":function(e,t,i){"use strict";i("9d79")},"66ec":function(e,t,i){"use strict";i.r(t);var n=i("7a23");function o(e,t,i,o,l,r){var a=Object(n["resolveComponent"])("view-grid");return Object(n["openBlock"])(),Object(n["createBlock"])(a,{ref:"grid",columns:e.columns,detail:e.detail,editFormFields:e.editFormFields,editFormOptions:e.editFormOptions,searchFormFields:e.searchFormFields,searchFormOptions:e.searchFormOptions,table:e.table,extend:e.extend},null,8,["columns","detail","editFormFields","editFormOptions","searchFormFields","searchFormOptions","table","extend"])}var l={components:{gridHeader:"",gridBody:"",gridFooter:"",modelHeader:"",modelBody:"",modelFooter:""},tableAction:"Sys_QuartzLog",buttons:{view:[],box:[],detail:[]},methods:{onInit:function(){"/Sys_QuartzLog"!=this.$route.path&&(this.tableHeight=345)},onInited:function(){},searchBefore:function(e){return"/Sys_QuartzLog"!=this.$route.path&&e.wheres.push({name:"Id",value:this.$store.getters.data().quartzId}),!0},searchAfter:function(e){return!0},addBefore:function(e){return!0},updateBefore:function(e){return!0},rowClick:function(e){e.row,e.column,e.event},modelOpenAfter:function(e){}}},r=l,a=Object(n["defineComponent"])({setup:function(){var e=Object(n["ref"])({key:"LogId",footer:"Foots",cnName:"执行记录",name:"quartz/Sys_QuartzLog",url:"/Sys_QuartzLog/",sortName:"StratDate"}),t=Object(n["ref"])({}),i=Object(n["ref"])([]),o=Object(n["ref"])({TaskName:"",ElapsedTime:[null,null],StratDate:"",Result:""}),l=Object(n["ref"])([[{title:"任务名称",field:"TaskName",type:"like"},{title:"耗时(秒)",field:"ElapsedTime",type:"range"},{title:"开始时间",field:"StratDate",type:"datetime"},{dataKey:"enable",data:[],title:"是否成功",field:"Result",type:"select"}]]),a=Object(n["ref"])([{field:"LogId",title:"LogId",type:"guid",width:110,hidden:!0,readonly:!0,require:!0,align:"left"},{field:"Id",title:"任务id",type:"guid",width:110,hidden:!0,align:"left"},{field:"TaskName",title:"任务名称",type:"string",width:120,align:"left",sort:!0},{field:"ElapsedTime",title:"耗时(秒)",type:"int",width:90,align:"left"},{field:"StratDate",title:"开始时间",type:"datetime",width:150,align:"left",sort:!0},{field:"EndDate",title:"结束时间",type:"datetime",width:150,align:"left",sort:!0},{field:"Result",title:"是否成功",type:"int",bind:{key:"enable",data:[]},width:100,align:"left"},{field:"ResponseContent",title:"返回内容",type:"string",width:250,align:"left"},{field:"ErrorMsg",title:"异常信息",type:"string",width:150,align:"left"},{field:"CreateID",title:"CreateID",type:"int",width:80,hidden:!0,align:"left"},{field:"Creator",title:"Creator",type:"string",width:130,hidden:!0,align:"left"},{field:"CreateDate",title:"CreateDate",type:"datetime",width:110,hidden:!0,align:"left",sort:!0},{field:"ModifyID",title:"ModifyID",type:"int",width:80,hidden:!0,align:"left"},{field:"Modifier",title:"Modifier",type:"string",width:130,hidden:!0,align:"left"},{field:"ModifyDate",title:"ModifyDate",type:"datetime",width:110,hidden:!0,align:"left",sort:!0}]),d=Object(n["ref"])({cnName:"#detailCnName",table:"#detailTable",columns:[],sortName:"",key:""});return{table:e,extend:r,editFormFields:t,editFormOptions:i,searchFormFields:o,searchFormOptions:l,columns:a,detail:d}}}),d=i("6b0d"),c=i.n(d);const s=c()(a,[["render",o]]);t["default"]=s},"9d79":function(e,t,i){},a80f:function(e,t,i){"use strict";i("f3c5")},bd3c:function(e,t,i){"use strict";i.r(t);var n=i("7a23");function o(e,t,i,o,l,r){var a=Object(n["resolveComponent"])("view-grid");return Object(n["openBlock"])(),Object(n["createBlock"])(a,{ref:"grid",columns:e.columns,detail:e.detail,editFormFields:e.editFormFields,editFormOptions:e.editFormOptions,searchFormFields:e.searchFormFields,searchFormOptions:e.searchFormOptions,table:e.table,extend:e.extend},null,8,["columns","detail","editFormFields","editFormOptions","searchFormFields","searchFormOptions","table","extend"])}i("99af"),i("ac1f"),i("841c"),i("159b");var l=Object(n["createTextVNode"])("关闭"),r=Object(n["createTextVNode"])(" 定时任务只有发布后才会运行(本地不会执行),"),a=Object(n["createElementVNode"])("a",{style:{color:"#2d8cf0","margin-left":"20px"},target:"blank",href:"http://v2.volcore.xyz/document/netCoreDev"},"查看配置文档",-1),d=Object(n["createElementVNode"])("a",{style:{color:"#2d8cf0","margin-left":"20px"},target:"blank",href:"http://v2.volcore.xyz/document/log"},"查看更新方式",-1);function c(e,t,i,o,c,s){var u=Object(n["resolveComponent"])("QuartzLog"),f=Object(n["resolveComponent"])("el-button"),p=Object(n["resolveComponent"])("vol-box"),m=Object(n["resolveComponent"])("el-alert");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(p,{lazy:!0,modelValue:c.model,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.model=e}),title:"执行日志",height:500,width:1200,padding:0},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",null,[Object(n["createVNode"])(f,{type:"default",size:"mini",onClick:t[0]||(t[0]=function(e){return c.model=!1})},{default:Object(n["withCtx"])((function(){return[l]})),_:1})])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{ref:"log"},null,512)]})),_:1},8,["modelValue"]),Object(n["createVNode"])(m,{style:{"margin-bottom":"10px"},"show-icon":!1,type:"success"},{default:Object(n["withCtx"])((function(){return[r,a,d]})),_:1})],64)}var s=i("ade3"),u=i("0d63"),f=i("66ec"),p=Object(s["a"])({components:{"vol-box":u["default"],QuartzLog:f["default"]},methods:{},data:function(){return{model:!1}}},"methods",{open:function(){var e=this;this.model=!0,this.$nextTick((function(){e.$refs.log.$refs.grid.search()}))}}),m=i("6b0d"),h=i.n(m);const b=h()(p,[["render",c]]);var g=b,y={components:{gridHeader:"",gridBody:g,gridFooter:"",modelHeader:"",modelBody:"",modelFooter:""},tableAction:"",buttons:{view:[],box:[],detail:[]},methods:{onInit:function(){var e=this;this.textInline=!1,this.columns.push({field:"操作",title:"操作",width:180,fixed:"right",align:"center",render:function(t,i){var o=i.row;i.column,i.index;return Object(n["createVNode"])("div",null,[Object(n["createVNode"])(Object(n["resolveComponent"])("el-buton"),{type:"primary",style:"color:#2882df;font-size:12px;",onClick:function(){e.edit(o)}},{default:function(){return[Object(n["createTextVNode"])("编辑")]}}),Object(n["createVNode"])(Object(n["resolveComponent"])("el-buton"),{type:"primary",style:"color:#2882df;font-size:12px;margin-left:10px;",onClick:function(){e.request("Run",o,"once")}},{default:function(){return[Object(n["createTextVNode"])("执行一次")]}}),Object(n["createVNode"])(Object(n["resolveComponent"])("el-buton"),{type:"primary",style:"color:#2882df;font-size:12px;margin-left:10px;",onClick:function(){1==o.Status?e.request("start",o):e.request("pause",o)}},{default:function(){return[1==o.Status?"恢复":"暂停"]}}),Object(n["createVNode"])(Object(n["resolveComponent"])("el-buton"),{type:"primary",style:"color:#2882df;font-size:12px;margin-left:10px;",onClick:function(){e.$store.getters.data().quartzId=o.Id,e.$refs.gridBody.open()}},{default:function(){return[Object(n["createTextVNode"])("日志")]}})])}})},request:function(e,t,i){var n=this,o="api/Sys_QuartzOptions/".concat(e,"?val=").concat(i);this.http.post(o,t,!0).then((function(e){n.$message.success("执行成功"),n.search()}))},onInited:function(){this.height=this.height-50,this.columns.forEach((function(e){"Status"==e.field&&(e.align="center",e.formatter=function(e){return 1==e.Status?'<a style="color:red;"><span style="display: inline-block;padding: 4px;background: red; border-radius: 50%; margin-right: 5px;"></span>暂停</a>':'<a style="color:#04b348;"><span style="display: inline-block;padding: 4px;background: #20c423; border-radius: 50%; margin-right: 5px;"></span>正常</a>'})})),this.editFormOptions.forEach((function(e){e.forEach((function(e){"CronExpression"==e.field?e.extra={style:"color: #0e84ff;cursor: pointer;",text:"查看",click:function(){window.open("https://cron.qqe2.com/","_blank")}}:"PostData"==e.field&&(e.placeholder='post参数格式如：{name:"1",value:"2"}')}))}))},searchBefore:function(e){return!0},searchAfter:function(e){return!0},addBefore:function(e){return!0},updateBefore:function(e){return!0},rowClick:function(e){e.row,e.column,e.event},modelOpenAfter:function(e){var t=this;"Add"!=this.currentAction&&this.editFormFields.TimeOut||(this.editFormFields.TimeOut=180),this.editFormOptions.forEach((function(e){e.forEach((function(e){"GroupName"==e.field&&(e.readonly="Add"!=t.currentAction)}))}))}}},O=y,j=Object(n["defineComponent"])({setup:function(){var e=Object(n["ref"])({key:"Id",footer:"Foots",cnName:"定时任务",name:"quartz/Sys_QuartzOptions",url:"/Sys_QuartzOptions/",sortName:"TaskName"}),t=Object(n["ref"])({TaskName:"",GroupName:"",Method:"",CronExpression:"",TimeOut:"",Describe:"",AuthKey:"",AuthValue:"",ApiUrl:"",PostData:"",Creator:"",CreateDate:""}),i=Object(n["ref"])([[{title:"任务名称",required:!0,field:"TaskName"},{title:"任务分组",required:!0,field:"GroupName"}],[{dataKey:"请求方式",data:[],title:"请求方式",field:"Method",type:"select"},{title:"Corn表达式",required:!0,field:"CronExpression"}],[{title:"超时时间(秒)",field:"TimeOut",type:"number"},{title:"描述",field:"Describe"}],[{title:"AuthKey",field:"AuthKey"},{title:"AuthValue",field:"AuthValue"}],[{title:"Url地址",field:"ApiUrl",colSize:12}],[{title:"post参数",field:"PostData",colSize:12,type:"textarea"}],[{title:"创建人",field:"Creator",disabled:!0},{title:"创建时间",field:"CreateDate",disabled:!0}]]),o=Object(n["ref"])({TaskName:"",LastRunTime:"",CreateDate:"",ModifyDate:""}),l=Object(n["ref"])([[{title:"任务名称",field:"TaskName",type:"like"},{title:"最后执行时间",field:"LastRunTime",type:"datetime"},{title:"创建时间",field:"CreateDate",type:"datetime"},{title:"修改时间",field:"ModifyDate",type:"datetime"}]]),r=Object(n["ref"])([{field:"Id",title:"Id",type:"guid",width:110,hidden:!0,readonly:!0,require:!0,align:"left"},{field:"TaskName",title:"任务名称",type:"string",link:!0,width:120,require:!0,align:"left",sort:!0},{field:"GroupName",title:"任务分组",type:"string",width:100,require:!0,align:"left"},{field:"Method",title:"请求方式",type:"string",bind:{key:"请求方式",data:[]},width:110,align:"left"},{field:"TimeOut",title:"超时时间(秒)",type:"int",width:80,hidden:!0,align:"left"},{field:"CronExpression",title:"Corn表达式",type:"string",width:120,require:!0,align:"left"},{field:"ApiUrl",title:"Url地址",type:"string",width:150,align:"left"},{field:"PostData",title:"post参数",type:"string",width:110,hidden:!0,align:"left"},{field:"AuthKey",title:"AuthKey",type:"string",width:100,hidden:!0,align:"left"},{field:"AuthValue",title:"AuthValue",type:"string",width:100,hidden:!0,align:"left"},{field:"Describe",title:"描述",type:"string",width:120,align:"left"},{field:"LastRunTime",title:"最后执行时间",type:"datetime",width:150,align:"left",sort:!0},{field:"Status",title:"运行状态",type:"int",width:90,align:"left"},{field:"CreateID",title:"CreateID",type:"int",width:80,hidden:!0,align:"left"},{field:"Creator",title:"创建人",type:"string",width:130,hidden:!0,readonly:!0,align:"left"},{field:"CreateDate",title:"创建时间",type:"datetime",width:150,hidden:!0,readonly:!0,align:"left",sort:!0},{field:"ModifyID",title:"ModifyID",type:"int",width:80,hidden:!0,align:"left"},{field:"Modifier",title:"Modifier",type:"string",width:130,hidden:!0,align:"left"},{field:"ModifyDate",title:"修改时间",type:"datetime",width:110,hidden:!0,align:"left",sort:!0}]),a=Object(n["ref"])({cnName:"#detailCnName",table:"#detailTable",columns:[],sortName:"",key:""});return{table:e,extend:O,editFormFields:t,editFormOptions:i,searchFormFields:o,searchFormOptions:l,columns:r,detail:a}}});const v=h()(j,[["render",o]]);t["default"]=v},f3c5:function(e,t,i){}}]);